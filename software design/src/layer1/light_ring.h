#ifndef LIGHT_RING_H
#define LIGHT_RING_H

#include "main.h"

class LightRing {
    public:
        void setup();
        void calibrate();
        void printThresholds();
        void read();

        int ldr_readings[32];

        int ldr_min_readings[32];
        int ldr_max_readings[32];

        const int ldr_thresholds[32] = {
            2254, // 0
            2469, // 1
            2541, // 2
            2497, // 3
            2475, // 4
            2546, // 5
            2485, // 6
            2530, // 7
            2636, // 8
            2443, // 9
            2531, // 10
            2532, // 11
            2442, // 12
            2391, // 13
            2554, // 14
            2275, // 15
            2212, // 16
            2162, // 17
            2187, // 18
            2187, // 19
            2175, // 20
            2122, // 21
            2160, // 22
            2154, // 23
            2196, // 24
            2165, // 25
            2200, // 26
            2194, // 27
            2172, // 28
            2195, // 29
            2203, // 30
            2139, // 31
        };

        const int mux_signals[16][4] = {
            {0, 0, 0, 0}, // 0
            {1, 0, 0, 0}, // 1
            {0, 1, 0, 0}, // 2
            {1, 1, 0, 0}, // 3
            {0, 0, 1, 0}, // 4
            {1, 0, 1, 0}, // 5
            {0, 1, 1, 0}, // 6
            {1, 1, 1, 0}, // 7
            {0, 0, 0, 1}, // 8
            {1, 0, 0, 1}, // 9
            {0, 1, 0, 1}, // 10
            {1, 1, 0, 1}, // 11
            {0, 0, 1, 1}, // 12
            {1, 0, 1, 1}, // 13
            {0, 1, 1, 1}, // 14
            {1, 1, 1, 1}  // 15
        };
};

const double ldr_angle = 11.25;

#endif