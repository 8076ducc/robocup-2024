#ifndef LIGHT_RING_H
#define LIGHT_RING_H

#include "main.h"

class LightRing
{
public:
    void setup();
    void calibrate();
    void printThresholds();
    void read();

    int line_start_ldr;
    int line_end_ldr;

    int ldr_readings[32];

    int ldr_min_readings[32];
    int ldr_max_readings[32];

#ifdef BOT1
    const int ldr_thresholds[32] = {
        // 1657, // 0
        // 1594, // 1
        // 1583, // 2
        // 1683, // 3
        // 1639, // 4
        // 1680, // 5
        // 1635, // 6
        // 1750, // 7
        // 1742, // 8
        // 1688, // 9
        // 1780, // 10
        // 1681, // 11
        // 1690, // 12
        // 1627, // 13
        // 1684, // 14
        // 1661, // 15
        // 1706, // 16
        // 1623, // 17
        // 1609, // 18
        // 1690, // 19
        // 1660, // 20
        // 1555, // 21
        // 1707, // 22
        // 1613, // 23
        // 1784, // 24
        // 1732, // 25
        // 1786, // 26
        // 1681, // 27
        // 1732, // 28
        // 1737, // 29
        // 1586, // 30
        // 1632, // 31
        1628, // 0
        1412, // 1
        1338, // 2
        1509, // 3
        1438, // 4
        1493, // 5
        1513, // 6
        1636, // 7
        1569, // 8
        1535, // 9
        1619, // 10
        1580, // 11
        1569, // 12
        1574, // 13
        1523, // 14
        1483, // 15
        1504, // 16
        1358, // 17
        1178, // 18
        1425, // 19
        1529, // 20
        1181, // 21
        1401, // 22
        1395, // 23
        1550, // 24
        1536, // 25
        1644, // 26
        1616, // 27
        1625, // 28
        1601, // 29
        1555, // 30
        1540, // 31
    };

#else

    const int ldr_thresholds[32] = {
        // 2220, // 0
        // 2297, // 1
        // 2176, // 2
        // 2241, // 3
        // 2550, // 4
        // 2467, // 5
        // 2372, // 6
        // 2470, // 7
        // 2437, // 8
        // 2387, // 9
        // 2146, // 10
        // 2258, // 11
        // 2529, // 12
        // 2444, // 13
        // 2395, // 14
        // 2505, // 15
        // 2339, // 16
        // 2276, // 17
        // 2229, // 18
        // 2135, // 19
        // 2335, // 20
        // 2238, // 21
        // 2294, // 22
        // 2234, // 23
        // 2319, // 24
        // 2296, // 25
        // 2277, // 26
        // 2324, // 27
        // 2252, // 28
        // 2338, // 29
        // 2319, // 30
        // 2285, // 31
        2179, // 0
        2288, // 1
        2340, // 2
        2330, // 3
        2482, // 4
        2423, // 5
        2313, // 6
        2382, // 7
        2371, // 8
        2317, // 9
        2424, // 10
        2396, // 11
        2427, // 12
        2336, // 13
        2362, // 14
        2497, // 15
        2187, // 16
        2173, // 17
        2094, // 18
        1982, // 19
        1987, // 20
        1870, // 21
        2217, // 22
        2212, // 23
        2269, // 24
        2264, // 25
        2295, // 26
        2314, // 27
        2206, // 28
        2247, // 29
        2308, // 30
        2303, // 31
    };

#endif

    const int mux_signals[16][4] = {
        {0, 0, 0, 0}, // 0
        {1, 0, 0, 0}, // 1
        {0, 1, 0, 0}, // 2
        {1, 1, 0, 0}, // 3
        {0, 0, 1, 0}, // 4
        {1, 0, 1, 0}, // 5
        {0, 1, 1, 0}, // 6
        {1, 1, 1, 0}, // 7
        {0, 0, 0, 1}, // 8
        {1, 0, 0, 1}, // 9
        {0, 1, 0, 1}, // 10
        {1, 1, 0, 1}, // 11
        {0, 0, 1, 1}, // 12
        {1, 0, 1, 1}, // 13
        {0, 1, 1, 1}, // 14
        {1, 1, 1, 1}  // 15
    };
};

const double ldr_angle = 11.25;

#endif